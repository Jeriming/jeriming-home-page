(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6bee5ba0"],{"408a":function(e,t,n){var r=n("e330");e.exports=r(1..valueOf)},7683:function(e,t,n){},9587:function(e,t,n){"use strict";n("7683")},b680:function(e,t,n){"use strict";var r=n("23e7"),i=n("da84"),a=n("e330"),o=n("5926"),s=n("408a"),u=n("1148"),l=n("d039"),h=i.RangeError,d=i.String,c=Math.floor,m=a(u),v=a("".slice),p=a(1..toFixed),f=function(e,t,n){return 0===t?n:t%2===1?f(e,t-1,n*e):f(e*e,t/2,n)},g=function(e){var t=0,n=e;while(n>=4096)t+=12,n/=4096;while(n>=2)t+=1,n/=2;return t},x=function(e,t,n){var r=-1,i=n;while(++r<6)i+=t*e[r],e[r]=i%1e7,i=c(i/1e7)},w=function(e,t){var n=6,r=0;while(--n>=0)r+=e[n],e[n]=c(r/t),r=r%t*1e7},T=function(e){var t=6,n="";while(--t>=0)if(""!==n||0===t||0!==e[t]){var r=d(e[t]);n=""===n?r:n+m("0",7-r.length)+r}return n},_=l((function(){return"0.000"!==p(8e-5,3)||"1"!==p(.9,0)||"1.25"!==p(1.255,2)||"1000000000000000128"!==p(0xde0b6b3a7640080,0)}))||!l((function(){p({})}));r({target:"Number",proto:!0,forced:_},{toFixed:function(e){var t,n,r,i,a=s(this),u=o(e),l=[0,0,0,0,0,0],c="",p="0";if(u<0||u>20)throw h("Incorrect fraction digits");if(a!=a)return"NaN";if(a<=-1e21||a>=1e21)return d(a);if(a<0&&(c="-",a=-a),a>1e-21)if(t=g(a*f(2,69,1))-69,n=t<0?a*f(2,-t,1):a/f(2,t,1),n*=4503599627370496,t=52-t,t>0){x(l,0,n),r=u;while(r>=7)x(l,1e7,0),r-=7;x(l,f(10,r,1),0),r=t-1;while(r>=23)w(l,1<<23),r-=23;w(l,1<<r),x(l,1,1),w(l,2),p=T(l)}else x(l,0,n),x(l,1<<-t,0),p=T(l)+m("0",u);return u>0?(i=p.length,p=c+(i<=u?"0."+m("0",u-i)+p:v(p,0,i-u)+"."+v(p,i-u))):p=c+p,p}})},ef9e:function(e,t,n){"use strict";n.r(t);var r=n("7a23"),i={id:"container"};function a(e,t,n,a,o,s){return Object(r["n"])(),Object(r["d"])("div",i)}n("b680");var o=n("5a89");class s{constructor(e,t,n){this.variables=[],this.currentTextureIndex=0;let r=o["p"];const i=new o["I"],a=new o["g"];a.position.z=1;const s={passThruTexture:{value:null}},u=d(m(),s),l=new o["v"](new o["D"](2,2),u);function h(n){n.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function d(e,t){t=t||{};const n=new o["L"]({uniforms:t,vertexShader:c(),fragmentShader:e});return h(n),n}function c(){return"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n"}function m(){return"uniform sampler2D passThruTexture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( passThruTexture, uv );\n\n}\n"}i.add(l),this.setDataType=function(e){return r=e,this},this.addVariable=function(e,t,n){const r=this.createShaderMaterial(t),i={name:e,initialValueTexture:n,material:r,dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:o["y"],magFilter:o["y"]};return this.variables.push(i),i},this.setVariableDependencies=function(e,t){e.dependencies=t},this.init=function(){if(!1===n.capabilities.isWebGL2&&!1===n.extensions.has("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===n.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(let n=0;n<this.variables.length;n++){const r=this.variables[n];r.renderTargets[0]=this.createRenderTarget(e,t,r.wrapS,r.wrapT,r.minFilter,r.magFilter),r.renderTargets[1]=this.createRenderTarget(e,t,r.wrapS,r.wrapT,r.minFilter,r.magFilter),this.renderTexture(r.initialValueTexture,r.renderTargets[0]),this.renderTexture(r.initialValueTexture,r.renderTargets[1]);const i=r.material,a=i.uniforms;if(null!==r.dependencies)for(let e=0;e<r.dependencies.length;e++){const t=r.dependencies[e];if(t.name!==r.name){let e=!1;for(let n=0;n<this.variables.length;n++)if(t.name===this.variables[n].name){e=!0;break}if(!e)return"Variable dependency not found. Variable="+r.name+", dependency="+t.name}a[t.name]={value:null},i.fragmentShader="\nuniform sampler2D "+t.name+";\n"+i.fragmentShader}}return this.currentTextureIndex=0,null},this.compute=function(){const e=this.currentTextureIndex,t=0===this.currentTextureIndex?1:0;for(let n=0,r=this.variables.length;n<r;n++){const r=this.variables[n];if(null!==r.dependencies){const t=r.material.uniforms;for(let n=0,i=r.dependencies.length;n<i;n++){const i=r.dependencies[n];t[i.name].value=i.renderTargets[e].texture}}this.doRenderTarget(r.material,r.renderTargets[t])}this.currentTextureIndex=t},this.getCurrentRenderTarget=function(e){return e.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(e){return e.renderTargets[0===this.currentTextureIndex?1:0]},this.addResolutionDefine=h,this.createShaderMaterial=d,this.createRenderTarget=function(n,i,a,s,u,l){n=n||e,i=i||t,a=a||o["h"],s=s||o["h"],u=u||o["y"],l=l||o["y"];const h=new o["V"](n,i,{wrapS:a,wrapT:s,minFilter:u,magFilter:l,format:o["F"],type:r,depthBuffer:!1});return h},this.createTexture=function(){const n=new Float32Array(e*t*4),r=new o["k"](n,e,t,o["F"],o["p"]);return r.needsUpdate=!0,r},this.renderTexture=function(e,t){s.passThruTexture.value=e,this.doRenderTarget(u,t),s.passThruTexture.value=null},this.doRenderTarget=function(e,t){const r=n.getRenderTarget();l.material=e,n.setRenderTarget(t),n.render(i,a),l.material=u,n.setRenderTarget(r)}}}class u{constructor(e=Math){this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(let t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(let t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]}dot(e,t,n){return e[0]*t+e[1]*n}dot3(e,t,n,r){return e[0]*t+e[1]*n+e[2]*r}dot4(e,t,n,r,i){return e[0]*t+e[1]*n+e[2]*r+e[3]*i}noise(e,t){let n,r,i;const a=.5*(Math.sqrt(3)-1),o=(e+t)*a,s=Math.floor(e+o),u=Math.floor(t+o),l=(3-Math.sqrt(3))/6,h=(s+u)*l,d=s-h,c=u-h,m=e-d,v=t-c;let p,f;m>v?(p=1,f=0):(p=0,f=1);const g=m-p+l,x=v-f+l,w=m-1+2*l,T=v-1+2*l,_=255&s,b=255&u,S=this.perm[_+this.perm[b]]%12,y=this.perm[_+p+this.perm[b+f]]%12,D=this.perm[_+1+this.perm[b+1]]%12;let F=.5-m*m-v*v;F<0?n=0:(F*=F,n=F*F*this.dot(this.grad3[S],m,v));let z=.5-g*g-x*x;z<0?r=0:(z*=z,r=z*z*this.dot(this.grad3[y],g,x));let M=.5-w*w-T*T;return M<0?i=0:(M*=M,i=M*M*this.dot(this.grad3[D],w,T)),70*(n+r+i)}noise3d(e,t,n){let r,i,a,o;const s=1/3,u=(e+t+n)*s,l=Math.floor(e+u),h=Math.floor(t+u),d=Math.floor(n+u),c=1/6,m=(l+h+d)*c,v=l-m,p=h-m,f=d-m,g=e-v,x=t-p,w=n-f;let T,_,b,S,y,D;g>=x?x>=w?(T=1,_=0,b=0,S=1,y=1,D=0):g>=w?(T=1,_=0,b=0,S=1,y=0,D=1):(T=0,_=0,b=1,S=1,y=0,D=1):x<w?(T=0,_=0,b=1,S=0,y=1,D=1):g<w?(T=0,_=1,b=0,S=0,y=1,D=1):(T=0,_=1,b=0,S=1,y=1,D=0);const F=g-T+c,z=x-_+c,M=w-b+c,V=g-S+2*c,P=x-y+2*c,I=w-D+2*c,C=g-1+3*c,H=x-1+3*c,R=w-1+3*c,N=255&l,A=255&h,E=255&d,k=this.perm[N+this.perm[A+this.perm[E]]]%12,O=this.perm[N+T+this.perm[A+_+this.perm[E+b]]]%12,W=this.perm[N+S+this.perm[A+y+this.perm[E+D]]]%12,L=this.perm[N+1+this.perm[A+1+this.perm[E+1]]]%12;let U=.6-g*g-x*x-w*w;U<0?r=0:(U*=U,r=U*U*this.dot3(this.grad3[k],g,x,w));let j=.6-F*F-z*z-M*M;j<0?i=0:(j*=j,i=j*j*this.dot3(this.grad3[O],F,z,M));let B=.6-V*V-P*P-I*I;B<0?a=0:(B*=B,a=B*B*this.dot3(this.grad3[W],V,P,I));let q=.6-C*C-H*H-R*R;return q<0?o=0:(q*=q,o=q*q*this.dot3(this.grad3[L],C,H,R)),32*(r+i+a+o)}noise4d(e,t,n,r){const i=this.grad4,a=this.simplex,o=this.perm,s=(Math.sqrt(5)-1)/4,u=(5-Math.sqrt(5))/20;let l,h,d,c,m;const v=(e+t+n+r)*s,p=Math.floor(e+v),f=Math.floor(t+v),g=Math.floor(n+v),x=Math.floor(r+v),w=(p+f+g+x)*u,T=p-w,_=f-w,b=g-w,S=x-w,y=e-T,D=t-_,F=n-b,z=r-S,M=y>D?32:0,V=y>F?16:0,P=D>F?8:0,I=y>z?4:0,C=D>z?2:0,H=F>z?1:0,R=M+V+P+I+C+H,N=a[R][0]>=3?1:0,A=a[R][1]>=3?1:0,E=a[R][2]>=3?1:0,k=a[R][3]>=3?1:0,O=a[R][0]>=2?1:0,W=a[R][1]>=2?1:0,L=a[R][2]>=2?1:0,U=a[R][3]>=2?1:0,j=a[R][0]>=1?1:0,B=a[R][1]>=1?1:0,q=a[R][2]>=1?1:0,G=a[R][3]>=1?1:0,J=y-N+u,K=D-A+u,X=F-E+u,Y=z-k+u,Q=y-O+2*u,Z=D-W+2*u,$=F-L+2*u,ee=z-U+2*u,te=y-j+3*u,ne=D-B+3*u,re=F-q+3*u,ie=z-G+3*u,ae=y-1+4*u,oe=D-1+4*u,se=F-1+4*u,ue=z-1+4*u,le=255&p,he=255&f,de=255&g,ce=255&x,me=o[le+o[he+o[de+o[ce]]]]%32,ve=o[le+N+o[he+A+o[de+E+o[ce+k]]]]%32,pe=o[le+O+o[he+W+o[de+L+o[ce+U]]]]%32,fe=o[le+j+o[he+B+o[de+q+o[ce+G]]]]%32,ge=o[le+1+o[he+1+o[de+1+o[ce+1]]]]%32;let xe=.6-y*y-D*D-F*F-z*z;xe<0?l=0:(xe*=xe,l=xe*xe*this.dot4(i[me],y,D,F,z));let we=.6-J*J-K*K-X*X-Y*Y;we<0?h=0:(we*=we,h=we*we*this.dot4(i[ve],J,K,X,Y));let Te=.6-Q*Q-Z*Z-$*$-ee*ee;Te<0?d=0:(Te*=Te,d=Te*Te*this.dot4(i[pe],Q,Z,$,ee));let _e=.6-te*te-ne*ne-re*re-ie*ie;_e<0?c=0:(_e*=_e,c=_e*_e*this.dot4(i[fe],te,ne,re,ie));let be=.6-ae*ae-oe*oe-se*se-ue*ue;return be<0?m=0:(be*=be,m=be*be*this.dot4(i[ge],ae,oe,se,ue)),27*(l+h+d+c+m)}}var l,h,d,c,m,v,p,f,g,x="\nuniform sampler2D heightmap;\n#define PHONG\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n  varying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n  vec2 cellSize = vec2( 1.0 / WIDTH, 1.0 / WIDTH );\n\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n\n  // # include <beginnormal_vertex>\n  // Compute normal from heightmap\n  vec3 objectNormal = vec3(\n    ( texture2D( heightmap, uv + vec2( - cellSize.x, 0 ) ).x - texture2D( heightmap, uv + vec2( cellSize.x, 0 ) ).x ) * WIDTH / BOUNDS,\n    ( texture2D( heightmap, uv + vec2( 0, - cellSize.y ) ).x - texture2D( heightmap, uv + vec2( 0, cellSize.y ) ).x ) * WIDTH / BOUNDS,\n    1.0 );\n  //<beginnormal_vertex>\n\n  #include <morphnormal_vertex>\n  #include <skinbase_vertex>\n  #include <skinnormal_vertex>\n  #include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n  vNormal = normalize( transformedNormal );\n\n#endif\n\n  //# include <begin_vertex>\n  float heightValue = texture2D( heightmap, uv ).x;\n  vec3 transformed = vec3( position.x, position.y, heightValue );\n  //<begin_vertex>\n\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <displacementmap_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n  #include <clipping_planes_vertex>\n\n  vViewPosition = - mvPosition.xyz;\n\n  #include <worldpos_vertex>\n  #include <envmap_vertex>\n  #include <shadowmap_vertex>\n\n}\n",w=x,T="\n#include <common>\nuniform vec2 mousePos;\nuniform float mouseSize;\nuniform float viscosityConstant;\nuniform float heightCompensation;\n\nvoid main()\t{\n\n  vec2 cellSize = 1.0 / resolution.xy;\n\n  vec2 uv = gl_FragCoord.xy * cellSize;\n\n  // heightmapValue.x == height from previous frame\n  // heightmapValue.y == height from penultimate frame\n  // heightmapValue.z, heightmapValue.w not used\n  vec4 heightmapValue = texture2D( heightmap, uv );\n\n  // Get neighbours\n  vec4 north = texture2D( heightmap, uv + vec2( 0.0, cellSize.y ) );\n  vec4 south = texture2D( heightmap, uv + vec2( 0.0, - cellSize.y ) );\n  vec4 east = texture2D( heightmap, uv + vec2( cellSize.x, 0.0 ) );\n  vec4 west = texture2D( heightmap, uv + vec2( - cellSize.x, 0.0 ) );\n\n  // https://web.archive.org/web/20080618181901/http://freespace.virgin.net/hugo.elias/graphics/x_water.htm\n\n  float newHeight = ( ( north.x + south.x + east.x + west.x ) * 0.5 - heightmapValue.y ) * viscosityConstant;\n\n  // Mouse influence\n  float mousePhase = clamp( length( ( uv - vec2( 0.5 ) ) * BOUNDS - vec2( mousePos.x, - mousePos.y ) ) * PI / mouseSize, 0.0, PI );\n  newHeight += ( cos( mousePhase ) + 1.0 ) * 0.28;\n\n  heightmapValue.y = heightmapValue.x;\n  heightmapValue.x = newHeight;\n\n  gl_FragColor = heightmapValue;\n\n}\n",_=T,b=128,S=512,y=!1,D=new o["S"],F=new o["G"],z=new u;function M(){l=document.createElement("div"),document.body.appendChild(l),h=new o["B"](75,window.innerWidth/window.innerHeight,1,3e3),h.position.set(0,200,350),h.lookAt(0,0,0),d=new o["I"];var e=new o["l"](16777215,1);e.position.set(300,400,175),d.add(e);var t=new o["l"](4235328,.6);t.position.set(-100,350,-200),d.add(t),c=new o["W"],c.setPixelRatio(window.devicePixelRatio),c.setSize(window.innerWidth,window.innerHeight),l.appendChild(c.domElement),l.style.touchAction="none",l.addEventListener("mousedown",H),document.addEventListener("keydown",(function(e){87===e.keyCode&&(m.material.wireframe=!m.material.wireframe,m.material.needsUpdate=!0)})),window.addEventListener("resize",I);var n={mouseSize:20,viscosity:.98},r=function(){f.material.uniforms["mouseSize"].value=n.mouseSize,f.material.uniforms["viscosityConstant"].value=n.viscosity};V(),r()}function V(){var e=16576,t=new o["D"](S,S,b-1,b-1),n=new o["L"]({uniforms:o["R"].merge([o["K"]["phong"].uniforms,{heightmap:{value:null}}]),vertexShader:w,fragmentShader:o["J"]["meshphong_frag"]});n.lights=!0,n.color=new o["j"](e),n.specular=new o["j"](1118481),n.shininess=50,n.uniforms["diffuse"].value=n.color,n.uniforms["specular"].value=n.specular,n.uniforms["shininess"].value=Math.max(n.shininess,1e-4),n.uniforms["opacity"].value=n.opacity,n.defines.WIDTH=b.toFixed(1),n.defines.BOUNDS=S.toFixed(1),g=n.uniforms,m=new o["v"](t,n),m.rotation.x=-Math.PI/2,m.matrixAutoUpdate=!1,m.updateMatrix(),d.add(m);var r=new o["D"](S,S,1,1);v=new o["v"](r,new o["w"]({color:16777215,visible:!1})),v.rotation.x=-Math.PI/2,v.matrixAutoUpdate=!1,v.updateMatrix(),d.add(v),p=new s(b,b,c);var i=p.createTexture();P(i),f=p.addVariable("heightmap",_,i),p.setVariableDependencies(f,[f]),f.material.uniforms["mousePos"]={value:new o["S"](1e4,1e4)},f.material.uniforms["mouseSize"]={value:20},f.material.uniforms["viscosityConstant"]={value:.98},f.material.uniforms["heightCompensation"]={value:0},f.material.defines.BOUNDS=S.toFixed(1);var a=p.init();null!==a&&console.error(a)}function P(e){var t=10;function n(e,n){for(var r=t,i=.025,a=0,o=0;o<15;o++)a+=r*z.noise(e*i,n*i),r*=.53+.025*o,i*=1.25;return a}for(var r=e.image.data,i=0,a=0;a<b;a++)for(var o=0;o<b;o++){var s=128*o/b,u=128*a/b;r[i+0]=n(s,u),r[i+1]=r[i+0],r[i+2]=0,r[i+3]=1,i+=4}}function I(){h.aspect=window.innerWidth/window.innerHeight,h.updateProjectionMatrix(),c.setSize(window.innerWidth,window.innerHeight)}function C(e,t){D.set(e/c.domElement.clientWidth*2-1,-t/c.domElement.clientHeight*2+1),y=!0}function H(e){!1!==e.isPrimary&&C(e.clientX,e.clientY)}function R(){requestAnimationFrame(R),N()}function N(){var e=f.material.uniforms;if(y){F.setFromCamera(D,h);var t=F.intersectObject(v);if(t.length>0){var n=t[0].point;e["mousePos"].value.set(n.x,n.z)}else e["mousePos"].value.set(1e4,1e4);y=!1}else e["mousePos"].value.set(1e4,1e4);p.compute(),g["heightmap"].value=p.getCurrentRenderTarget(f).texture,c.render(d,h)}var A={data:function(){return{}},mounted:function(){M(),R()}},E=(n("9587"),n("6b0d")),k=n.n(E);const O=k()(A,[["render",a],["__scopeId","data-v-02b82052"]]);t["default"]=O}}]);
//# sourceMappingURL=chunk-6bee5ba0.3b5bc464.js.map